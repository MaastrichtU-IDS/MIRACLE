[nlp]
lang = "en"
pipeline = ["llm"]

[components]

[components.llm]
factory = "llm"

[components.llm.task]
@llm_tasks = "spacy.NER.v2"
labels = ["DRUG", "ROUTE", "FORMULATION", "MECHANISM", "ADJUNCT_TO", "ACTION", "CONDITION", "BASECONDITION", "ANATOMY", "CAUSED_BY", "SYMPTOM", "TARGET_GROUP", "CO_MORBIDITY", "CO_PRESCRIPTION", "HISTORY", "TEMPORALITY", "MEDICAL_CTX", "EFFECT", "SIDEEFFECT", "CONTRAINDICATION", "INEFFECTIVE"]

[components.llm.task.label_definitions]
DRUG = "The drug name or the active ingredient"
ROUTE = "The route of administration (e.g. oral, intravenous, topical)"
FORMULATION = "The formulation of the drug (e.g. solution, tablet)"
MECHANISM = "The drug mechanism of action (e.g. protein inhibitor)"
ADJUNCT_TO = "Where the drug acts as an adjunctive therapy, use this label to identify what it is combined with."
ACTION = "The action between the drug and the condition (e.g. treatment of, management of)"
CONDITION = "The condition that is indicated for the drug (e.g. tremors, pain)"
BASECONDITION = "The base condition is the underlying pathophysiological state in which the indicated condition is a symptom of (e.g. Parkinson's, cancer)"
ANATOMY = "The specific anatomical part for which the condition is localized to."
CAUSED_BY = "The cause of the condition that is to be treated (e.g. E. coli for an infection)"
SYMPTOM = "Symptoms that are mentioned that are part of the medical context of treatment but are not the target of the treatment."
TARGET_GROUP = "Group of patients or individuals for whom a particular drug is intended or designed to be used."
CO_MORBIDITY = "Other conditions that may be present as part of the target group."
CO_PRESCRIPTION = "Other medications that may be in use by the target group."
HISTORY = "Statements relating to the medical history of the target group."
TEMPORALITY = "Statements relating to the temporality of the treatment."
MEDICAL_CTX = "Statements that discuss the medical context beyond those mentioned above."
EFFECT = "Intended beneficial effects of the treatment."
SIDEEFFECT = "Negative side effects of the treatment."
CONTRAINDICATION = "The manner in which the drug should not or must not be used."
INEFFECTIVE = "The manner in which the drug is ineffective."

[components.llm.model]
@llm_models = "spacy.GPT-4.v1"
config = {"temperature": 0.3}

[components.llm.cache]
@llm_misc = "spacy.BatchCache.v1"
path = "local-ner-cache"
batch_size = 3
max_batches_in_mem = 10